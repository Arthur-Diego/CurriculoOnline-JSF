<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      >
    <ui:composition template="/WEB-INF/template/templateMain.xhtml">
        <ui:define name="content_page_inicial">
        </ui:define> 
        <ui:define name="content">
            <h:form id="frmPerfil">
                <h3 style="margin-top:0">Cadastro perfil</h3>
                <p:panel footer="#{loginController.nomeUsuario}" id="panelMain">
                    <h3>Informações pessoais</h3>
                    <p:separator/>
                    <h:panelGrid columns="2" style="width: 100%">
                        <h:panelGroup>
                            <div class="form-horizontal" style="margin-top: 0;">
                                <div class="form-group">
                                    <label class="col-md-2 control-label" for="textinput">Nome:</label>  
                                    <div class="col-md-8">
                                        <p:inputText value="#{perfilController.current.nome}"  placeholder="Nome completo" styleClass="form-control input-md">
                                            <p:ajax event="blur" process="@this" listener="#{perfilController.prepareCreate()}"/>
                                        </p:inputText>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-2 control-label" for="textinput">Idade:</label>  
                                    <div class="col-md-6">
                                        <p:inputText value="#{perfilController.current.idade}"   placeholder="Idade" styleClass="form-control input-md" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-2 control-label" for="textinput">Telefone</label>  
                                    <div class="col-md-6">
                                        <p:inputMask placeholder="Telefone" mask="(999)99999-9999" value="#{perfilController.current.telefone}"   styleClass="form-control input-md"/>

                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-2 control-label" for="textinput">Email</label>  
                                    <div class="col-md-6">
                                        <p:inputText value="#{perfilController.current.email}"  placeholder="Email" styleClass="form-control input-md"/>

                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-2 control-label" for="textinput">CNH</label>  
                                    <div class="col-md-4">
                                        <p:inputText value="#{perfilController.current.CNH}"  placeholder="CNH" styleClass="form-control input-md"/>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-2 control-label" for="textinput">Habilitação</label>
                                    <div class="col-md-4">
                                        <h:selectOneMenu styleClass="form-control input-md" value="#{perfilController.current.tipoHabilitacao}">
                                            <f:selectItems value="#{perfilController.listaTipoHabilitacao}" var="tipo" itemValue="#{tipo}" itemLabel="#{tipo.label}"/>
                                        </h:selectOneMenu>
                                    </div>
                                </div>
                            </div>
                        </h:panelGroup>
                        <h:panelGroup>
                            <div class="form-horizontal" >
                                <div class="form-group">
                                    <p:outputLabel value="Cep:" styleClass="col-md-2 control-label" />
                                    <div class="col-md-4">
                                        <p:inputText styleClass="form-control input-md" id="cep" value="#{perfilController.current.endereco.CEP}" onblur="pesquisacep(this.value);" maxlength="9"/>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <p:outputLabel value="UF:" styleClass="col-md-2 control-label"/>
                                    <div class="col-md-6">
                                        <p:inputText styleClass="form-control input-md" id="uf"  value="#{perfilController.current.endereco.estado}"/>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <p:outputLabel value="Cidade:" styleClass="col-md-2 control-label"/>
                                    <div class="col-md-6">
                                        <p:inputText styleClass="form-control input-md" id="cidade"  value="#{perfilController.current.endereco.cidade}"/>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <p:outputLabel value="Bairro:" styleClass="col-md-2 control-label"/>
                                    <div class="col-md-6">
                                        <p:inputText styleClass="form-control input-md" id="bairro" value="#{perfilController.current.endereco.bairro}"/>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <p:outputLabel value="Rua:" styleClass="col-md-2 control-label"/>
                                    <div class="col-sm-8">
                                        <p:inputText styleClass="form-control input-md" id="rua"  value="#{perfilController.current.endereco.rua}"/>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <p:outputLabel value="Número:" styleClass="col-md-2 control-label"/>
                                    <div class="col-md-4">
                                        <p:inputText styleClass="form-control input-md"   value="#{perfilController.current.endereco.numero}"/>
                                    </div>
                                </div>
                            </div>
                        </h:panelGroup>
                    </h:panelGrid>
                    <h3>Objetivo</h3>
                    <p:separator/>
                    <h:panelGrid columns="1" style="width: 100%;">
                        <p:outputLabel value="Objetivo"/>
                        <p:inputTextarea style="width: 40%;" value="#{perfilController.conhecimento.objetivo}"/>
                    </h:panelGrid>
                    <h3>Formação</h3>
                    <p:separator/>
                    <h:panelGroup id="panelFormacao">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th><p:outputLabel value="Tipo formação:" /></th>
                                        <th> <p:outputLabel value="Curso" /></th>
                                        <th><p:outputLabel value="Instituição" /></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <ui:repeat id="listFormacao" value="#{perfilController.listaFormacao}" var="formacao">
                                        <tr>
                                            <td><h:selectOneMenu styleClass="form-control" value="#{formacao.tipoFormacao}">
                                                    <f:selectItem value="#{null}" itemLabel="Selecione"/>
                                                    <f:selectItems value="#{perfilController.listaTipoFormacao}" var="tipo" itemValue="#{tipo}" itemLabel="#{tipo.label}"/>
                                                </h:selectOneMenu>
                                            </td>
                                            <td><p:inputText style="width: 100%" value="#{formacao.curso}"/></td>
                                            <td> <p:inputText style="width: 100%" value="#{formacao.instituicao}"/></td>
                                            <td>
                                                <h:commandLink id="btnAddFormacao" styleClass="btn btn-default">
                                                    <span class="glyphicon glyphicon-plus"></span> Add 
                                                    <f:ajax execute=":frmPerfil:panelFormacao" render=":frmPerfil:panelFormacao" listener="#{perfilController.addFormacao()}"/>
                                                </h:commandLink>
                                            </td>
                                        </tr>
                                    </ui:repeat>
                                </tbody>
                            </table>
                        </div>
                    </h:panelGroup>
                    <h3>Qualificações</h3>
                    <p:separator/>
                    <h:panelGroup id="panelQualificacao">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th><p:outputLabel value="Curso/Palestra:" /></th>
                                        <th> <p:outputLabel value="Carga horária" /></th>
                                        <th><p:outputLabel value="AnoTérminio" /></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <ui:repeat id="listQualificacao" value="#{perfilController.listaQualificacao}" var="qualificacao">
                                        <tr>
                                            <td><p:inputText style="width: 100%" value="#{qualificacao.cursoPalestras}"/></td>
                                            <td><p:inputText style="width: 100%" value="#{qualificacao.cargaHoraria}"/></td>
                                            <td>
                                                <p:inputText style="width: 100%" value="#{qualificacao.anoTerminio}"/>
                                            </td>
                                            <td>
                                                <h:commandLink id="btnAddFormacao" styleClass="btn btn-default">
                                                    <span class="glyphicon glyphicon-plus"></span> Add 
                                                    <f:ajax execute=":frmPerfil:panelQualificacao" render=":frmPerfil:panelQualificacao" listener="#{perfilController.addQualificacao()}"/>
                                                </h:commandLink>
                                            </td>
                                        </tr>
                                    </ui:repeat>
                                </tbody>

                            </table>
                        </div>
                    </h:panelGroup>
                    <h3>Experiências</h3>
                    <h:panelGroup id="panelExperiencia">
                        <p:separator/>
                        <div class="table-responsive">
                            <table class="table table-hover" style="width: 100%;">
                                <thead>
                                    <tr>
                                        <th><p:outputLabel value="Local:" /></th>
                                        <th> <p:outputLabel value="Data de Entrada:" /></th>
                                        <th><p:outputLabel value="Data de saída" /></th>

                                    </tr>
                                </thead>
                                <tbody style="width: 100%">
                                    <ui:repeat value="#{perfilController.listaExperiencia}" var="experiencia">
                                        <tr style="width: 100%">
                                            <td><p:inputText value="#{experiencia.empresa}" style="width: 100%"/></td>
                                            <td><p:calendar value="#{experiencia.dataInicio}" pattern="MM/yyyy" style="width: 100%"/></td>
                                            <td><p:calendar value="#{experiencia.dataFinal}" pattern="MM/yyyy" style="width: 100%"/></td>
                                            <td>
                                                <h:commandLink id="btnAddFormacao" styleClass="btn btn-default">
                                                    <span class="glyphicon glyphicon-plus"></span> Add 
                                                    <f:ajax execute=":frmPerfil:panelExperiencia" render=":frmPerfil:panelExperiencia" listener="#{perfilController.addExperiencia()}"/>
                                                </h:commandLink>
                                            </td>
                                        </tr>
                                        <tr style="width: 100%">
                                            <td  style="width: 100%">
                                                <h:panelGrid columns="1" style="width: 100%" >
                                                    <tr >
                                                        <th style="width: 100%"><p:outputLabel value="Breve descrição:" style="width: 100%" /></th>
                                                    </tr>
                                                    <tr>
                                                        <td style="width: 100% !important" ><p:inputTextarea value="#{experiencia.descExperiencia}" style="width: 100%" /></td>
                                                    </tr>
                                                </h:panelGrid>
                                            </td>
                                        </tr>
                                    </ui:repeat>
                                </tbody>
                            </table>
                        </div>
                    </h:panelGroup>
                    <h3>Informações adicionais</h3>
                    <p:separator/>
                    <h:panelGroup id="panelInformacao">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Informação adicional</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <ui:repeat value="#{perfilController.listaInformacaoAdicional}" var="infoAdicional">
                                        <tr>
                                            <td><p:inputText style="width: 100%" value="#{infoAdicional.informacao}"/></td>
                                            <td>
                                                <h:commandLink id="btnAddFormacao" styleClass="btn btn-default">
                                                    <span class="glyphicon glyphicon-plus"></span> Add 
                                                    <f:ajax execute=":frmPerfil:panelInformacao" render=":frmPerfil:panelInformacao" listener="#{perfilController.addInformacaoAdicional()}"/>
                                                </h:commandLink>
                                            </td>
                                        </tr>
                                    </ui:repeat>
                                </tbody>
                            </table>
                        </div>
                    </h:panelGroup>
                </p:panel>
                <h:commandButton value="salvar" id="btnSalvar" >
                    <f:ajax execute="@all" listener="#{perfilController.createOrEdit()}"/>
                </h:commandButton>
            </h:form>
        </ui:define>
    </ui:composition>
</html>
